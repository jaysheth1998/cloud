(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(86)},28:function(e,t,a){},30:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(18),i=a.n(o),c=(a(28),a(5)),s=a(6),r=a(8),d=a(7),m=a(9),u=(a(30),a(3)),p=a(13),f=(a(39),a(87),{apiKey:"AIzaSyD7bj3yvhh34khlj-Q_KFrVTEyneOz33wg",authDomain:"cloudjay-73119.firebaseapp.com",databaseURL:"https://cloudjay-73119.firebaseio.com",projectId:"cloudjay-73119",storageBucket:"cloudjay-73119.appspot.com",messagingSenderId:"926889221381",appId:"1:926889221381:web:215444e1201eb572"});p.initializeApp(f),p.firestore().settings({timestampsInSnapshots:!0});var h=p.firestore(),g=p.storage(),v=(p.firestore.FieldValue.serverTimestamp(),a(22));var b=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};a(84);var E=function(e,t){t||(t=3e3);var a=document.createElement("div");a.innerHTML=e,a.id="snackbar",a.className="show",document.body.appendChild(a),setTimeout(function(){a.className=a.className.replace("show","")},t)},j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).uploadFile=a.uploadFile.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"uploadFile",value:function(){if(document.getElementById("file-input").files[0]){var e=document.getElementById("file-input").files[0],t=b(),a="".concat(t,"<==>").concat(e.name),n=g.ref(a),l=!1;e||(E("You need to specify a file!",4e3),l=!0),l||(E("Uploading File",2e3),n.put(e).then(function(e){console.log(e);var t="gs://".concat(e.metadata.bucket,"/").concat(e.metadata.fullPath);n.getDownloadURL().then(function(e){h.collection("files").add({uploadDate:new Date,fileName:a,storageURI:t,downloadURL:e}).then(function(e){console.log(e),h.collection("files").doc(e.id).set({id:e.id},{merge:!0})})}),E("File Uploaded")}))}else E("You need to upload a file first!")}},{key:"render",value:function(){return l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s8"},l.a.createElement("input",{type:"file",id:"file-input",className:"dropify","data-height":"300"})),l.a.createElement("div",{className:"input-field col s4"},l.a.createElement(v.Button,{waves:"light",node:"a",onClick:this.uploadFile,icon:"file_upload"}," Upload File "))))}},{key:"componentDidMount",value:function(){}}]),t}(l.a.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("nav",{className:"top-nav"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{className:"brand-logo",href:"/"},"Shah Cloud Services")),l.a.createElement("a",{href:"#","data-activates":"mobile-demo",className:"button-collapse"},l.a.createElement("i",{className:"material-icons"},"menu")),l.a.createElement("ul",{className:"right hide-on-med-and-down valign-wrapper"},l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Upload")),l.a.createElement("li",null,l.a.createElement("a",{href:"download"},"Download"))),l.a.createElement("ul",{className:"side-nav",id:"mobile-demo"},l.a.createElement("li",null,l.a.createElement("a",{href:"/"},"Upload")),l.a.createElement("li",null,l.a.createElement("a",{href:"download"},"Download")))))))}}]),t}(l.a.Component);var w=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).getFileType=a.getFileType.bind(Object(u.a)(Object(u.a)(a))),a.getFileIcon=a.getFileIcon.bind(Object(u.a)(Object(u.a)(a))),a.deleteFile=a.deleteFile.bind(Object(u.a)(Object(u.a)(a))),a.setIcon=a.setIcon.bind(Object(u.a)(Object(u.a)(a))),a.getIcon=a.getIcon.bind(Object(u.a)(Object(u.a)(a))),a.state={},console.log(a.props.file);var n=a.getFileType(a.props.file.fileName),l=a.getFileIcon(n),o=a.setIcon(l);return a.state={imagePreview:o},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getFileType",value:function(e){return e?e.substring(e.lastIndexOf(".")+1,e.length)||e:"unsupported"}},{key:"setIcon",value:function(e){return"image"===e?this.props.file.downloadURL:"-1"===e?"https://cloud.ronakshah.net/images/icons/file.png":e}},{key:"getIcon",value:function(e){return"image"===e?this.props.file.downloadURL:"-1"===e?"https://cloud.ronakshah.net/images/icons/file.png":e}},{key:"getFileIcon",value:function(e){var t=e.toLowerCase(),a="https://cloud.ronakshah.net/images/icons/"+t+".png";return"png"===t||"gif"===t||"jpg"===t||"jpeg"===t||"tiff"===t?"image":-1!==["aac","aiff","ai","avi","_blank","bmp","c","cpp","css","csv","dat","dmg","doc","dotx","dwg","dxf","eps","exe","filetypes","flv","gif","h","hpp","html","ics","iso","java","jpg","js","key","less","mid","mp3","mp4","mpg","odf","ods","odt","otp","ots","ott","_page","pdf","php","png","ppt","psd","py","qt","rar","rb","rtf","sass","scss","sql","tga","tgz","tiff","txt","wav","xls","xlsx","xml","yml","zip"].indexOf(t)?a:"-1"}},{key:"deleteFile",value:function(){var e=this;console.log(this.props),g.refFromURL(this.props.file.storageURI).delete().then(function(){h.collection("files").doc(e.props.file.id).delete(),E("Successfully Deleted!")}).catch(function(e){E("Error ".concat(e," occured"))})}},{key:"render",value:function(){var e=this,t=this.getIcon(this.getFileIcon(this.getFileType(this.props.file.fileName))),a=this.props.file.fileName.split("<==>").slice(1).join("<==>");return l.a.createElement("div",{className:"col s12 m4"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:t,alt:"file logo",width:"330",height:"330"}),l.a.createElement("span",{className:"card-title"},a)),l.a.createElement("div",{className:"card-content"},l.a.createElement("p",null,"Uploaded on ",this.props.file.uploadDate.toDate().toLocaleString().split(",")[0],".")),l.a.createElement("div",{className:"card-action"},l.a.createElement("a",{href:this.props.file.downloadURL,download:this.props.file.fileName.split("<==>").slice(1).join("<==>")},"Download"),l.a.createElement("a",{href:"#!",onClick:function(){console.log(e.props.file.fileName),function(e){document.addEventListener("copy",function t(a){a.clipboardData.setData("text/plain",e);a.preventDefault();document.removeEventListener("copy",t,!0)},!0),document.execCommand("copy")}(e.props.file.downloadURL),E("Link Copied!",4e3)}},"Copy URL"),l.a.createElement("a",{href:"#!",onClick:function(){e.deleteFile()}},"Delete"))))}}]),t}(l.a.Component),O=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(d.a)(t).call(this))).state={files:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.collection("files").orderBy("uploadDate","desc").limit(20).onSnapshot(function(t){var a=[];t.forEach(function(t){t.exists?(a.push(t.data()),e.setState({files:a})):E("Document does not exist")}),e.setState({files:a})})}},{key:"render",value:function(){var e=l.a.createElement("h1",null,l.a.createElement("center",null,"No files yet. Start uploading!"));return 0!==this.state.files.length&&(e=l.a.createElement("div",{className:"row"},this.state.files.map(function(e,t){return l.a.createElement(w,{file:e,key:t})}))),l.a.createElement("div",null,l.a.createElement(y,null),l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"section"},l.a.createElement("div",{className:"row"},l.a.createElement(j,null)),e))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.75a498ce.chunk.js.map